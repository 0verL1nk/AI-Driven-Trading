# ğŸ–¥ï¸ ç›‘æ§ç³»ç»Ÿå¿«é€Ÿå¯åŠ¨æŒ‡å—

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trading Bot    â”‚  â”€â”€â”€â”€â”€â”€â–¶â”‚  SQLite Database â”‚â—€â”€â”€â”€â”€â”€â”€  â”‚  Web API      â”‚
â”‚  (main.py)      â”‚  ä¿å­˜æ•°æ® â”‚  (trading_data.db)â”‚  è¯»å–æ•°æ® â”‚(web_monitor.py)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                  â”‚
                                                                  â”‚ HTTP/REST
                                                                  â”‚
                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                                                          â”‚  Next.js UI   â”‚
                                                          â”‚ (localhost:3000)â”‚
                                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /home/ling/Trade
./start_monitor.sh
```

### æ–¹å¼2ï¼šåˆ†æ­¥å¯åŠ¨

#### ç¬¬1æ­¥ï¼šå¯åŠ¨åç«¯APIæœåŠ¡å™¨

```bash
cd /home/ling/Trade
source venv/bin/activate
python web_monitor.py
```

æœŸæœ›è¾“å‡ºï¼š
```
================================================================================
ğŸ–¥ï¸  AI TRADING MONITOR STARTING
================================================================================

ğŸ“Š Dashboard: http://localhost:8000
ğŸ”Œ API Docs: http://localhost:8000/docs

================================================================================
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
```

#### ç¬¬2æ­¥ï¼šå¯åŠ¨å‰ç«¯Next.jsåº”ç”¨

æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼š

```bash
cd /home/ling/Trade/frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦
npm run dev
```

æœŸæœ›è¾“å‡ºï¼š
```
   â–² Next.js 14.2.0
   - Local:        http://localhost:3000

 âœ“ Ready in 2.3s
```

#### ç¬¬3æ­¥ï¼šå¯åŠ¨äº¤æ˜“æœºå™¨äººï¼ˆå¯é€‰ï¼‰

å¦‚æœè¦çœ‹å®æ—¶æ•°æ®æ›´æ–°ï¼Œå†å¼€ä¸€ä¸ªç»ˆç«¯è¿è¡Œäº¤æ˜“botï¼š

```bash
cd /home/ling/Trade
source venv/bin/activate
python main.py
```

---

## ğŸ“Š è®¿é—®ç›‘æ§ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

- **ç›‘æ§ç•Œé¢**: http://localhost:3000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **ç›´æ¥APIæµ‹è¯•**: http://localhost:8000/api/account

---

## ğŸ” æµ‹è¯•APIæ¥å£

### æµ‹è¯•è´¦æˆ·æ•°æ®

```bash
curl http://localhost:8000/api/account
```

æœŸæœ›è¿”å›ï¼š
```json
{
  "id": 1,
  "timestamp": "2025-10-21 14:08:17",
  "total_value": 10000.0,
  "total_return": 0.0,
  "num_positions": 0,
  "available_balance": 10000.0,
  "used_balance": 0.0,
  "unrealized_pnl": 0.0
}
```

### æµ‹è¯•ä»·æ ¼æ•°æ®

```bash
curl http://localhost:8000/api/prices
```

### æµ‹è¯•AIå†³ç­–

```bash
curl http://localhost:8000/api/decisions?limit=5
```

### æµ‹è¯•æŒä»“

```bash
curl http://localhost:8000/api/positions
```

---

## ğŸ¨ å‰ç«¯åŠŸèƒ½è¯´æ˜

### 1. é¡¶éƒ¨ä»·æ ¼æ 
- å®æ—¶æ˜¾ç¤º6ä¸ªäº¤æ˜“å¯¹å½“å‰ä»·æ ¼
- å½©è‰²åœ†ç‚¹åŒºåˆ†ä¸åŒå¸ç§

### 2. ä¸»å›¾è¡¨åŒºåŸŸ
- æ˜¾ç¤ºè´¦æˆ·æ€»ä»·å€¼å†å²æ›²çº¿
- åˆ‡æ¢ALL/72Hæ—¶é—´èŒƒå›´
- æ˜¾ç¤ºæ€»æ”¶ç›Šç‡ç™¾åˆ†æ¯”

### 3. AIå†³ç­–åˆ—è¡¨ï¼ˆDECISIONSæ ‡ç­¾ï¼‰
æ˜¾ç¤ºæœ€è¿‘20æ¡AIäº¤æ˜“å†³ç­–ï¼ŒåŒ…æ‹¬ï¼š
- å¸ç§ + æ–¹å‘ï¼ˆLONG/SHORT/HOLDï¼‰
- å…¥åœºä»·ã€æ­¢æŸä»·ã€æ­¢ç›ˆä»·
- æ æ†å€æ•°
- ç½®ä¿¡åº¦
- AIæ¨ç†è¿‡ç¨‹

### 4. æŒä»“åˆ—è¡¨ï¼ˆPOSITIONSæ ‡ç­¾ï¼‰
æ˜¾ç¤ºå½“å‰æ‰€æœ‰æ´»è·ƒæŒä»“ï¼ŒåŒ…æ‹¬ï¼š
- å¸ç§ + æ–¹å‘æ ‡ç­¾
- å…¥åœºä»·/å½“å‰ä»·
- æŒä»“æ•°é‡
- æ æ†å€æ•°
- æœªå®ç°ç›ˆäºï¼ˆå®æ—¶æ›´æ–°ï¼‰
- æ”¶ç›Šç‡ç™¾åˆ†æ¯”
- å¼€ä»“æ—¶é—´

---

## ğŸ”„ æ•°æ®æµ

```
1. Trading Bot è¿è¡Œ
   â†“
2. æ¯2.6åˆ†é’Ÿæ”¶é›†å¸‚åœºæ•°æ®
   â†“
3. AIåˆ†æå¹¶ç”Ÿæˆå†³ç­–
   â†“
4. ä¿å­˜åˆ°SQLiteæ•°æ®åº“
   â†“
5. Web APIä»æ•°æ®åº“è¯»å–
   â†“
6. Next.jså‰ç«¯æ¯5ç§’åˆ·æ–°æ˜¾ç¤º
```

---

## ğŸ› æ•…éšœæ’é™¤

### å‰ç«¯æ˜¾ç¤º"Loading..."ä¸€ç›´ä¸æ¶ˆå¤±

æ£€æŸ¥ï¼š
1. åç«¯APIæ˜¯å¦åœ¨è¿è¡Œï¼Ÿ`curl http://localhost:8000/api/account`
2. æ˜¯å¦æœ‰CORSé”™è¯¯ï¼Ÿæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹Console
3. æ•°æ®åº“æ˜¯å¦æœ‰æ•°æ®ï¼Ÿ`ls -lh trading_data.db`

### å›¾è¡¨æ˜¾ç¤º"No data available"

è¿™æ˜¯æ­£å¸¸çš„ï¼å› ä¸ºåˆšå¯åŠ¨æ—¶æ•°æ®åº“æ˜¯ç©ºçš„ã€‚

è§£å†³æ–¹æ¡ˆï¼š
1. è¿è¡Œäº¤æ˜“bot (`python main.py`)
2. ç­‰å¾…è‡³å°‘ä¸€ä¸ªäº¤æ˜“å‘¨æœŸï¼ˆ2.6åˆ†é’Ÿï¼‰
3. åˆ·æ–°é¡µé¢

### APIè¿”å›ç©ºæ•°ç»„`[]`

è¯´æ˜æ•°æ®åº“è¿˜æ²¡æœ‰æ•°æ®ï¼Œè¿è¡Œäº¤æ˜“botç”Ÿæˆæ•°æ®ã€‚

### ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8000  # åç«¯
lsof -i :3000  # å‰ç«¯

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

æˆ–è€…æ”¹ç”¨å…¶ä»–ç«¯å£ï¼š

```bash
# å‰ç«¯ä½¿ç”¨3001ç«¯å£
cd frontend
npm run dev -- -p 3001

# åç«¯ä¿®æ”¹web_monitor.pyæœ€åä¸€è¡Œ
# uvicorn.run(app, host="0.0.0.0", port=8001, log_level="info")
```

---

## ğŸ“ æ•°æ®åº“ä½ç½®

SQLiteæ•°æ®åº“æ–‡ä»¶ï¼š`/home/ling/Trade/trading_data.db`

æŸ¥çœ‹æ•°æ®ï¼š
```bash
sqlite3 trading_data.db

# SQLæŸ¥è¯¢ç¤ºä¾‹
SELECT * FROM account_state ORDER BY timestamp DESC LIMIT 5;
SELECT * FROM coin_prices ORDER BY timestamp DESC LIMIT 10;
SELECT * FROM ai_decisions ORDER BY timestamp DESC LIMIT 10;
SELECT * FROM positions WHERE active = 1;
```

---

## ğŸ¯ å®Œæ•´æµ‹è¯•æµç¨‹

1. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**
   ```bash
   # Terminal 1: åç«¯API
   python web_monitor.py
   
   # Terminal 2: å‰ç«¯UI
   cd frontend && npm run dev
   
   # Terminal 3: äº¤æ˜“Bot
   python main.py
   ```

2. **è®¿é—®ç›‘æ§ç•Œé¢**
   - æ‰“å¼€ http://localhost:3000
   - åº”è¯¥çœ‹åˆ°é»‘è‰²èƒŒæ™¯çš„ç•Œé¢

3. **ç­‰å¾…æ•°æ®ç”Ÿæˆ**
   - äº¤æ˜“botä¼šåœ¨2.6åˆ†é’Ÿåç”Ÿæˆç¬¬ä¸€æ‰¹æ•°æ®
   - å‰ç«¯ä¼šè‡ªåŠ¨åˆ·æ–°æ˜¾ç¤º

4. **æ£€æŸ¥å„ä¸ªåŠŸèƒ½**
   - âœ“ é¡¶éƒ¨ä»·æ ¼æ æ˜¾ç¤º6ä¸ªå¸ç§ä»·æ ¼
   - âœ“ ä¸»å›¾è¡¨æ˜¾ç¤ºè´¦æˆ·ä»·å€¼æ›²çº¿
   - âœ“ DECISIONSæ ‡ç­¾æ˜¾ç¤ºAIå†³ç­–
   - âœ“ POSITIONSæ ‡ç­¾æ˜¾ç¤ºæŒä»“ï¼ˆå¦‚æœæœ‰äº¤æ˜“ï¼‰

---

## ğŸ¨ UIæ ·å¼ç‰¹ç‚¹

- **é»‘ç™½ç®€çº¦é£æ ¼**
- é»‘è‰²èƒŒæ™¯ (#000000)
- ç™½è‰²æ–‡å­— (#ffffff)
- ç»¿è‰²ç›ˆåˆ© (#00ff00)
- çº¢è‰²äºæŸ (#ff0000)
- ç°è‰²æ¬¡è¦ä¿¡æ¯ (#666666)
- æœ€å°åŒ–è§†è§‰å¹²æ‰°
- æ•°æ®ä¸ºä¸­å¿ƒçš„è®¾è®¡

---

## ğŸ“¦ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
/home/ling/Trade/
â”œâ”€â”€ main.py                    # äº¤æ˜“botä¸»ç¨‹åº
â”œâ”€â”€ web_monitor.py             # åç«¯APIæœåŠ¡å™¨
â”œâ”€â”€ trading_data.db            # SQLiteæ•°æ®åº“
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ models.py         # æ•°æ®åº“æ¨¡å‹
â”‚   â””â”€â”€ ...
â””â”€â”€ frontend/                  # Next.jså‰ç«¯
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ page.tsx          # ä¸»é¡µé¢
    â”‚   â””â”€â”€ layout.tsx        # å¸ƒå±€
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ PriceBar.tsx      # ä»·æ ¼æ ç»„ä»¶
    â”‚   â”œâ”€â”€ AccountChart.tsx  # å›¾è¡¨ç»„ä»¶
    â”‚   â”œâ”€â”€ DecisionsList.tsx # å†³ç­–åˆ—è¡¨
    â”‚   â””â”€â”€ PositionsList.tsx # æŒä»“åˆ—è¡¨
    â””â”€â”€ lib/
        â””â”€â”€ api.ts            # APIè°ƒç”¨å‡½æ•°
```

---

## âœ… æ¥å£å¯¹åº”å…³ç³»

| å‰ç«¯è°ƒç”¨ | åç«¯API | æ•°æ®åº“è¡¨ | ç”¨é€” |
|---------|---------|----------|------|
| `fetchAccount()` | `/api/account` | `account_state` | è´¦æˆ·çŠ¶æ€ |
| `fetchPrices()` | `/api/prices` | `coin_prices` | å¸ç§ä»·æ ¼ |
| `fetchDecisions()` | `/api/decisions` | `ai_decisions` | AIå†³ç­– |
| `fetchPositions()` | `/api/positions` | `positions` | æŒä»“ä¿¡æ¯ |
| `fetchAccountHistory()` | `/api/account_history` | `account_state` | å†å²æ•°æ® |

---

## ğŸ‰ å®Œæˆï¼

ç›‘æ§ç³»ç»Ÿå·²å®Œå…¨é…ç½®å¥½ï¼Œäº«å—å®æ—¶ç›‘æ§ä½ çš„AIäº¤æ˜“ï¼

